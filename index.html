<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Top 3 Donateurs</title>
  <style>
    /* Style de base pour l'overlay */
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: transparent; /* Fond transparent */
      font-family: Arial, sans-serif;
      color: #fff;
    }

    /* Conteneur principal */
    .donator-overlay {
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 10px;
      width: 250px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.8);
    }

    /* Titre */
    .donator-overlay h2 {
      margin-top: 0;
      font-size: 24px;
      color: #ffcc00;
      text-shadow: 0 0 10px #ffcc00;
    }

    /* Liste des donateurs */
    .donator-list {
      list-style: none;
      padding: 0;
      margin: 10px 0 0 0;
    }

    .donator-list li {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      font-size: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    .donator-name {
      font-weight: bold;
    }

    .donator-amount {
      color: #ffcc00;
    }

    /* Dernière ligne sans bordure */
    .donator-list li:last-child {
      border-bottom: none;
    }
  </style>
</head>
<body>
  <div class="donator-overlay">
    <h2>Top 3 Donateurs</h2>
    <ul id="donatorList" class="donator-list">
      <!-- Les donateurs seront insérés ici via JavaScript -->
    </ul>
  </div>

  <script>
    // URL de l'API pour récupérer les donateurs
    const apiUrl = "https://script.google.com/macros/s/AKfycbwjIYw0arJJZA9r156Ot4-Wm7Xbbxd3JVTdyiKT5fWnTzMcVGCMu4m-rNxZFCN_tL5Myw/exec";

    // Fonction pour récupérer et afficher les donateurs
    async function fetchDonators() {
        try {
            const response = await fetch(apiUrl);
            if (!response.ok) throw new Error(`Erreur HTTP : ${response.status}`);
            
            const donators = await response.json();
            const donatorList = document.getElementById("donatorList");
            donatorList.innerHTML = ""; // Vider la liste avant de l'actualiser

            // Vérifier s'il y a des donateurs à afficher
            if (donators.length === 0) {
                donatorList.innerHTML = "<li>Aucun donateur</li>";
                return;
            }

            // Ajouter chaque donateur à la liste
            donators.forEach(donator => {
                const listItem = document.createElement("li");
                listItem.innerHTML = `<span class="donator-name">${donator.name}</span><span class="donator-amount">${donator.amount}€</span>`;
                donatorList.appendChild(listItem);
            });
        } catch (error) {
            console.error("Erreur lors de la récupération des donateurs :", error);
            document.getElementById("donatorList").innerHTML = "<li>Erreur de chargement</li>";
        }
    }

    // Charger les donateurs au démarrage et actualiser toutes les 5 minutes
    fetchDonators();
    setInterval(fetchDonators, 300000); // Actualisation toutes les 5 minutes
  </script>
</body>
</html>
